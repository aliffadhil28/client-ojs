import{r as H,j as e,T as r,a as k,b as x,N as c,B as v,S as d,A as m,c as j}from"./Toast-v6hpJLx4.js";import"./iconBase-Qe4RONN1.js";import{c as D,R as I,P as L}from"./Problems-a2EvHqFi.js";import{C as A}from"./Code-_1Zq-8ol.js";import{h as y}from"./moment-WSJ9un1t.js";import{l as T}from"./helper-7EjJiDbg.js";import{u as C,a as N,b as R,O as p}from"./index-owATBqM6.js";import{L as F}from"./Login-UXAZYhk5.js";import{P as Y}from"./ProblemDetails-svGGWUpD.js";import{A as B}from"./AddProblem-3uCcU9J6.js";import{a as P}from"./axios-L6U4YIEh.js";import{A as S,a as f}from"./AuthContext-nGIo6CXm.js";import{F as E,a as M,b as O,c as U,d as z}from"./index-K8sHV9H_.js";import{P as G}from"./Profile-x01WkxpT.js";import{U as J}from"./Users-5UR19qQu.js";import"./buttonThemes-SzMD2y27.js";var b={},w=H;b.createRoot=w.createRoot,b.hydrateRoot=w.hydrateRoot;const _={root:{base:"bg-white px-2 py-2.5 dark:border-gray-700 dark:bg-gray-800 sm:px-4 sticky z-50 top-0",rounded:{on:"rounded",off:""},bordered:{on:"border",off:""},inner:{base:"mx-auto flex flex-wrap items-center justify-between",fluid:{on:"",off:"container"}}},brand:{base:"flex items-center"},collapse:{base:"w-full md:block md:w-auto",list:"mt-4 flex flex-col md:mt-0 md:flex-row md:space-x-8 md:text-sm md:font-medium",hidden:{on:"hidden",off:""}},link:{base:"flex py-2 pr-4 pl-3 md:p-2",active:{on:"rounded hover:text-white bg-[#6251DD] text-white *:mx-auto md:*:m-2",off:"bg-gray-100 rounded text-center text-black hover:text-white hover:bg-[#6251DD] *:mx-auto md:*:m-2"},disabled:{on:"text-gray-400 hover:cursor-not-allowed dark:text-gray-600",off:""}},toggle:{base:"inline-flex items-center rounded-lg p-2 text-sm text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600 md:hidden",icon:"h-6 w-6 shrink-0"}},W=()=>{document.title="Home";const a=C().data;return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(r,{hoverable:!0,children:[e.jsxs(r.Head,{children:[e.jsx(r.HeadCell,{children:"Code"}),e.jsx(r.HeadCell,{children:"Title"}),e.jsx(r.HeadCell,{children:"Due Date"}),e.jsx(r.HeadCell,{children:"Level"}),e.jsx(r.HeadCell,{children:"Actions"})]}),e.jsx(r.Body,{className:"divide-y",children:a.map((s,n)=>{const l=new DOMParser().parseFromString(T(s.level),"text/html");return e.jsxs(r.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(r.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:s.code}),e.jsx(r.Cell,{children:s.title}),e.jsxs(r.Cell,{children:[y(s.startDate).format("HH:mm DD-MM-YYYY")," -"," ",y(s.endDate).format("HH:mm DD-MM-YYYY")]}),e.jsx(r.Cell,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:l.body.innerHTML}})}),e.jsx(r.Cell,{children:e.jsx("a",{href:`/solve/${s.id}`,className:"font-medium text-cyan-600 hover:underline dark:text-cyan-500",children:"Solve"})})]},n)})})]})})},$=()=>e.jsx("div",{children:"Register"}),g=async t=>{try{return(await P.get(t,{withCredentials:!0})).data}catch(a){if(a.response.status==401)return k("/login")}},h=async(t,a)=>{try{return(await P.get(t+"/"+a,{withCredentials:!0})).data}catch(s){if(console.log(s),s.response.status===401)return k("/login")}},q=({children:t})=>{const{user:a}=x.useContext(S);N().pathname;function n(){localStorage.removeItem("userProfile"),window.location.href="/login"}return e.jsxs("div",{children:[e.jsxs(c,{base:!0,rounded:!0,theme:_,children:[e.jsx(c.Brand,{href:"/",children:e.jsx("span",{className:"self-center whitespace-nowrap text-xl font-semibold dark:text-white",children:"Cakra Online Judge"})}),e.jsx(c.Toggle,{}),e.jsx(c.Collapse,{children:a&&e.jsxs("div",{className:"link ms-auto flex flex-col w-full justify-center gap-2 md:flex-row",children:[e.jsx(c.Link,{href:"/profile",children:a==null?void 0:a.username}),e.jsx(v,{size:"xs",onClick:n,color:"dark",children:"Logout"})]})})]}),e.jsx("div",{className:"my-5",children:t})]})},K={root:{base:"h-full",collapsed:{on:"w-16",off:"w-64"},inner:"h-full overflow-y-auto overflow-x-hidden rounded-lg bg-gray-50 py-4 px-3 dark:bg-gray-800"},collapse:{button:"group flex w-full items-center rounded-lg p-2 text-base font-normal text-gray-900 transition duration-75 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",icon:{base:"h-6 w-6 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",open:{off:"",on:"text-gray-900"}},label:{base:"ml-3 flex-1 whitespace-nowrap text-left",icon:{base:"h-6 w-6 transition ease-in-out delay-0",open:{on:"rotate-180",off:""}}},list:"space-y-2 py-2"},cta:{base:"mt-6 rounded-lg p-4 bg-gray-100 dark:bg-gray-700",color:{blue:"bg-cyan-50 dark:bg-cyan-900",dark:"bg-dark-50 dark:bg-dark-900",failure:"bg-red-50 dark:bg-red-900",gray:"bg-alternative-50 dark:bg-alternative-900",green:"bg-green-50 dark:bg-green-900",light:"bg-light-50 dark:bg-light-900",red:"bg-red-50 dark:bg-red-900",purple:"bg-purple-50 dark:bg-purple-900",success:"bg-green-50 dark:bg-green-900",yellow:"bg-yellow-50 dark:bg-yellow-900",warning:"bg-yellow-50 dark:bg-yellow-900"}},item:{base:"flex items-center justify-center rounded-lg p-2 text-base font-normal text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-700",active:"bg-gray-100 dark:bg-gray-700",collapsed:{insideCollapse:"group w-full pl-8 transition duration-75",noIcon:"font-bold"},content:{base:"px-3 flex-1 whitespace-nowrap"},icon:{base:"h-6 w-6 flex-shrink-0 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white",active:"text-gray-700 dark:text-gray-100"},label:"",listItem:""},items:{base:""},itemGroup:{base:"mt-4 space-y-2 border-t border-gray-200 pt-4 first:mt-0 first:border-t-0 first:pt-0 dark:border-gray-700"},logo:{base:"mb-5 flex items-center pl-2.5",collapsed:{on:"hidden",off:"self-center whitespace-nowrap text-xl font-semibold dark:text-white"},img:"mr-3 h-6 sm:h-7"}},Q=({status:t,count:a})=>{const[s,n]=x.useState(a);let o;switch(t){case 401:o="Access Unauthorized";break;case 404:o="Page Not Found";break;default:o="Unknown error";break}return x.useEffect(()=>{const l=setInterval(()=>{n(i=>i-1)},1e3);return()=>clearInterval(l)},[]),e.jsx("div",{children:e.jsx("section",{className:"bg-white dark:bg-gray-900 ",children:e.jsx("div",{className:"container flex items-center min-h-screen px-6 py-12 mx-auto",children:e.jsxs("div",{className:"flex flex-col items-center max-w-sm mx-auto text-center",children:[e.jsx("p",{className:"p-3 text-sm font-medium text-blue-500 rounded-full bg-blue-50 dark:bg-gray-800",children:e.jsx(E,{})}),e.jsxs("h1",{className:"mt-3 text-2xl font-semibold text-gray-800 dark:text-white md:text-3xl",children:[t," | ",o]}),e.jsxs("p",{className:"mt-4 text-gray-500 dark:text-gray-400",children:["You'll be redirect back to home in ",e.jsx("strong",{children:s})," seconds"]}),e.jsxs("div",{className:"flex items-center w-full mt-6 gap-x-3 shrink-0 sm:w-auto",children:[e.jsxs("button",{className:"flex items-center justify-center w-1/2 px-5 py-2 text-sm text-gray-700 transition-colors duration-200 bg-white border rounded-lg gap-x-2 sm:w-auto dark:hover:bg-gray-800 dark:bg-gray-900 hover:bg-gray-100 dark:text-gray-200 dark:border-gray-700",children:[e.jsx(M,{}),e.jsx("span",{children:"Go back"})]}),e.jsx("button",{className:"w-1/2 px-5 py-2 text-sm tracking-wide text-white transition-colors duration-200 bg-blue-500 rounded-lg shrink-0 sm:w-auto hover:bg-blue-600 dark:hover:bg-blue-500 dark:bg-blue-600",children:"Take me home"})]})]})})})})},V=({children:t})=>{const{user:a}=x.useContext(S),s=R(),o=N().pathname,l=5;a.role!="admin"&&setInterval(()=>{s("/")},l*1e3);function i(){localStorage.removeItem("userProfile"),window.location.href="/login"}return e.jsx("div",{children:a.role!=="admin"?e.jsx(Q,{status:401,count:l}):e.jsxs("div",{className:"h-screen p-4 grid grid-cols-5",children:[e.jsx(d,{theme:K,"aria-label":"Sidebar with content separator example",children:e.jsx(d.Items,{children:e.jsxs(d.ItemGroup,{children:[e.jsx(d.Item,{href:"/dashboard/problems",...o==="/dashboard/problems"?{active:!0}:{},icon:O,children:"Problems"}),e.jsx(d.Item,{href:"/dashboard/users",...o==="/dashboard/users"?{active:!0}:{},icon:U,children:"User"}),e.jsx(d.Item,{href:"#",icon:z,children:e.jsx(v,{size:"xs",className:"bg-gray-5 w-full justify-start ms-0 hover:bg-gray-50",onClick:i,color:"white",children:"Logout"})})]})})}),e.jsx("div",{className:"ms-4 col-span-4",children:t})]})})},X=()=>{document.title="Submissions";const a=C().data;return e.jsxs("div",{className:"flex flex-col prose lg:prose-xl",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h1",{className:"my-3 font-bold",children:"Submitions"})}),e.jsx(m,{collapseAll:!0,children:a.map((s,n)=>{const o=s.submitions;return e.jsxs(m.Panel,{children:[e.jsxs(m.Title,{children:[e.jsx("b",{children:s.username})," (",s.noInduk,")"]}),e.jsx(m.Content,{children:e.jsxs(r,{children:[e.jsxs(r.Head,{children:[e.jsx(r.HeadCell,{children:"No"}),e.jsx(r.HeadCell,{children:"Test Pass"}),e.jsx(r.HeadCell,{children:"Working Time"}),e.jsx(r.HeadCell,{children:"Success"})]}),e.jsx(r.Body,{children:o.map((l,i)=>{const u=l.workTime;return e.jsxs(r.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(r.Cell,{children:i+1}),e.jsx(r.Cell,{children:l.testPass}),e.jsx(r.Cell,{children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"hour",children:String(u.hours).padStart(2,"0")}),":",e.jsx("div",{className:"minutes",children:String(u.minutes).padStart(2,"0")}),":",e.jsx("div",{className:"seconds",children:String(u.seconds).padStart(2,"0")})]})}),e.jsx(r.Cell,{children:l.success?e.jsx(j,{className:"flex justify-center",color:"success",children:"Success"}):e.jsx(j,{className:"flex justify-center",color:"failure",children:"Failure"})})]},i)})})]})})]},n)})})]})};function Z(){return e.jsx(f,{children:e.jsx(p,{})})}function ee(){return e.jsx(f,{children:e.jsx(q,{children:e.jsx(p,{})})})}function re(){return e.jsx(f,{children:e.jsx(V,{children:e.jsx(p,{})})})}const te=D([{element:e.jsx(ee,{}),children:[{path:"/",element:e.jsx(W,{}),loader:async()=>{const t=await g("http://localhost:8001/problems");return t==null&&(window.location.href="/login"),t}},{path:"/solve/:id",element:e.jsx(A,{}),loader:async({params:t})=>await h("http://localhost:8001/problems",t.id)},{path:"/profile",element:e.jsx(G,{}),loader:async()=>{const a=JSON.parse(localStorage.getItem("userProfile")).id;return await h("http://localhost:8001/submition/user",a)}}]},{element:e.jsx(re,{}),children:[{path:"/dashboard/problems",element:e.jsx(L,{}),loader:async()=>await g("http://localhost:8001/problems")},{path:"/dashboard/problems/:id",element:e.jsx(Y,{}),loader:async({params:t})=>await h("http://localhost:8001/problems",t.id)},{path:"/dashboard/problems/add",element:e.jsx(B,{})},{path:"/dashboard/solutions/:id",element:e.jsx(X,{}),loader:async({params:t})=>await h("http://localhost:8001/submition/solutions",t.id)},{path:"/dashboard/users",element:e.jsx(J,{}),loader:async()=>await g("http://localhost:8001/users")}]},{element:e.jsx(Z,{}),children:[{path:"/login",element:e.jsx(F,{})},{path:"/register",element:e.jsx($,{})}]}]);b.createRoot(document.getElementById("root")).render(e.jsx(I,{router:te}));
